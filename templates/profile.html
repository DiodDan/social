<html lang="en" dir="ltr">
  <head>
      <meta charset="UTF-8">
      <link rel="stylesheet" href="../../../static/css/style.css">
      <title>diod — your profile</title>
  </head>

  <body>
    <div class="main">
      <div class="container">
        <header>
          {% include "navigation_bar.html" %}</header>
        <div class="block profile head">
          <div class="photo">
            <img src="/media/{{ user.profile_photo }}" alt="Image Not Found">
          </div>
          <div class="info">
            <div class="name">
              <h2 style="color={{ theme_color }}">{{ user.name }}
              </h2>
              {% if user.flags_found %}
              <svg width="1.5rem" height="1.5rem" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" class="yellow"><path d="M475.3571,413.24a69.9,69.9,0,0,0-39.8845-57.4407l-39.9287-18.7987,21.5791-44.5621a89.4527,89.4527,0,0,0,.0025-77.9684L359.7988,96.0682C317.7933,9.3105,194.2088,9.31,152.2019,96.0666L94.87,214.4745a89.445,89.445,0,0,0,.0049,77.9692l21.581,44.5569L76.5256,355.8a69.898,69.898,0,0,0-39.8831,57.439l-3.612,43.3773a22.5157,22.5157,0,0,0,22.4381,24.3842H456.5337A22.5134,22.5134,0,0,0,478.97,456.6187ZM364,260.1205a107.9746,107.9746,0,0,1-98.1035,107.5V341.1249a9.8965,9.8965,0,0,0-19.793,0v26.4957A107.9746,107.9746,0,0,1,148,260.1205V203.44a28.8192,28.8192,0,0,1,28.8193-28.8193H335.1806A28.8193,28.8193,0,0,1,364,203.44Z"/><path d="M321.8213,275.9979a9.91,9.91,0,0,0-12.3135,6.6709,13.5776,13.5776,0,0,1-26.0156,0,9.9026,9.9026,0,1,0-18.9844,5.6426,33.3877,33.3877,0,0,0,63.9844,0A9.9125,9.9125,0,0,0,321.8213,275.9979Z"/><path d="M240.8213,275.9979a9.8908,9.8908,0,0,0-12.3135,6.6709,13.5776,13.5776,0,0,1-26.0156,0,9.9026,9.9026,0,1,0-18.9844,5.6426,33.3877,33.3877,0,0,0,63.9844,0A9.9125,9.9125,0,0,0,240.8213,275.9979Z"/><path d="M319,227.4384H283a9.8965,9.8965,0,1,0,0,19.7929h36a9.8965,9.8965,0,1,0,0-19.7929Z"/><path d="M193,247.2313h36a9.8965,9.8965,0,1,0,0-19.7929H193a9.8965,9.8965,0,1,0,0,19.7929Z"/></svg>
              {% endif %}
            </div>
            <div class="followers">
              <div class="number">
                <h2 id="amount_of_followers">{{ user.followers }}</h2>
                <h5>followers</h5>
              </div>
              <div class="number">
                <h2>{{ user.follows }}</h2>
                <h5>follows</h5>
              </div>
            </div>
            <h4> {{ user.description }} </h4>
            <div class="additional">
              <h5>e-mail: {{ user.email }}</h5>
              <h5>website: <a href="https://google.com">google.com</a></h5>
            </div>
            {% if is_owner %}
            <button id="change_data">Изменить описание</button>
            {% endif %}
            {% if not is_owner %}
            <button id="subscribe_button">{% if is_subscribed %}Отписаться{% else %}Подписаться{% endif %}</button>
            {% endif %}
            <font color="red" id="error_handler"></font>
          </div>
        </div>
        <div class="block profile posts">

          {% for post in range(lenpublications) %}
          <div class="block post">
            <div class="photo_block">
                <div class="user_info">
                    <div class="photo">
                        <img src="../media/{{ user.profile_photo }}" alt="Image Not Found">
                    </div>
                    <a href="../profile/{{ user.login }}"><h2>{{ user.name }}</h2></a>
                </div>
                <div class="photo">
                    <img src="../media/{{ publications[post].image }}" alt="Image Not Found">
                </div>
                <div class="action">
                    {% if self_user_id in publications[post].like_ids.split(",") %}
                        <div class="like">
                        <input type="checkbox" checked>
                    {% else %}
                        <div class="like normal">
                        <input type="checkbox">
                    {% endif %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M18 1l-6 4-6-4-6 5v7l12 10 12-10v-7z"/></svg>
                        <h4>{{ lenlikes[post] }}</h4>
                    </div>
                    <div class="comment">
                        <svg xmlns="http://www.w3.org/2000/svg" width="529.668px" height="529.668px" viewBox="0 0 529.668 529.668"><path d="M45.175,529.668l108.887-117.085h330.431V0H45.894L45.175,529.668z M383.896,173.016c20.527,0,37.164,16.64,37.164,37.164c0,20.527-16.641,37.164-37.164,37.164s-37.164-16.641-37.164-37.164C346.731,189.653,363.372,173.016,383.896,173.016zM265.192,173.016c20.526,0,37.165,16.64,37.165,37.164c0,20.527-16.641,37.164-37.165,37.164c-20.523,0-37.164-16.641-37.164-37.164C228.028,189.653,244.668,173.016,265.192,173.016z M146.488,173.016c20.527,0,37.164,16.64,37.164,37.164c0,20.527-16.641,37.164-37.164,37.164c-20.526,0-37.164-16.641-37.164-37.164C109.325,189.653,125.965,173.016,146.488,173.016z"/></svg>
                        <h4>{{lencomments[post] }}</h4>
                    </div>
                </div>
            </div>
            <div class="description">
              <h4>{{ publications[post].text }}</h4>
            </div>
          </div>
            {% endfor %}
        </div>
        
        </div>


        {% include "footer.html" %}
      </div>
    </div>
    {% if is_owner %}
    <div class="change_data">
      <form action="/profile/changedata/{{ user.login }}" method="post" enctype="multipart/form-data">
        <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf }}">
        <h3>change profile</h3>
        <div class="email">
          <h4>e-mail</h4>
          <input type="text" value="{{ user.email }}" name="email">
        </div>
        <div class="login_name">
          <h4>login</h4>
          <input type="text" value="{{ user.login }}" name="login">
        </div>
        <div class="name">
          <h4>name</h4>
          <input type="text" value="{{ user.name }}" name="name">
        </div>
        <div class="password">
          <h4>password</h4>
          <input type="password" value="{{ user.password }}" name="password">
        </div>
        <div class="photo">
          <h4>photo</h4>
          <input type="file" accept="image/jpg,image/jpeg,image/png,image/webp" name="profile_photo" value="{{ user.profile_photo }}">
        </div>
        <div class="description">
          <h4>description</h4>
          <input type="text" value="{{ user.description }}" name="description">
        </div>
        <div class="flag_submit">
          <h4>secret</h4>
          <input type="text" name="flag_submit">
        </div>
        {% if flags_found %}
        <div class="select_theme">
          <h4>choose theme</h4>
          <select name="themes">
            <option value="noob">noob</option>
            <option value="pro">pro</option>
          </select>
        </div>
        {% endif %}
        <button type="submit">save changes</button>
        <p><font size=3 color="red">{{ ERR }}</font></p>
      </form>
    </div>
    {% endif %}
  <script src="../static/js/profile.js" user_id="{{ user.id }}" user_login="{{ logedacc }}"></script>
  <script src="../static/js/like.js" post_ids="{% for publo in publications %}{{ publo.id }},{% endfor %}" user_login="{{ logedacc }}"></script>
  </body>
</html>